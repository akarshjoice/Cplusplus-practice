import tkinter as tk
from tkinter import ttk, messagebox

class LoginDialog(tk.Toplevel):
    def __init__(self, parent):
        super().__init__(parent)
        self.title("Connect to Server")
        self.geometry("300x150")
        self.transient(parent)
        self.grab_set()  # Ensures only this dialog is active
        self.result = None

        self.setup_ui()

    def setup_ui(self):
        tk.Label(self, text="Server IP:").pack(pady=5)
        self.ip_entry = ttk.Entry(self)
        self.ip_entry.pack(pady=5)

        tk.Label(self, text="Port:").pack(pady=5)
        self.port_entry = ttk.Entry(self)
        self.port_entry.pack(pady=5)

        button_frame = tk.Frame(self)
        button_frame.pack(pady=10)

        ttk.Button(button_frame, text="Connect", command=self.on_connect).grid(row=0, column=0, padx=5)
        ttk.Button(button_frame, text="Cancel", command=self.on_cancel).grid(row=0, column=1, padx=5)

    def on_connect(self):
        ip = self.ip_entry.get().strip()
        port = self.port_entry.get().strip()

        if ip and port.isdigit():
            self.result = (ip, int(port))  # Return the entered data
            self.destroy()
        else:
            messagebox.showerror("Error", "Invalid IP or Port")

    def on_cancel(self):
        self.result = None
        self.destroy()
